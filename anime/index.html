<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Clean Anime Links</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #eee;
      margin: 0;
      padding: 20px;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    h1 {
      color: #ff4655;
    }
    .btn {
      padding: 10px 15px;
      background: #ff4655;
      color: #fff;
      border: none;
      cursor: pointer;
      margin: 5px;
      border-radius: 4px;
    }
    .btn:hover {
      background: #e03d4f;
    }
    .links {
      margin-top: 20px;
    }
    .site-section {
      margin-bottom: 30px;
    }
    .site-section h2 {
      color: #ff4655;
      border-bottom: 1px solid #444;
      padding-bottom: 5px;
    }
    .anime-link {
      display: block;
      padding: 5px 0;
      text-decoration: none;
      color: #eee;
    }
    .anime-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <h1>Anime Links Aggregator</h1>
    <p>Fetching anime links from GogoAnime and HiAnime</p>
    <button class="btn" id="fetchGogo">Fetch GogoAnime Links</button>
    <button class="btn" id="fetchHi">Fetch HiAnime Links</button>
  </header>

  <section class="links">
    <div class="site-section" id="gogoSection">
      <h2>GogoAnime Links</h2>
      <div id="gogoLinks">Click the button to load links.</div>
    </div>
    <div class="site-section" id="hiSection">
      <h2>HiAnime Links</h2>
      <div id="hiLinks">Click the button to load links.</div>
    </div>
  </section>

  <script>
    // Using AllOrigins as a free CORS proxy. (See: https://allorigins.hexocode.repl.co/)
    const CORS_PROXY = 'https://api.allorigins.hexocode.repl.co/get?disableCache=true&url=';

    // Example URLs to scrape
    const GOGO_URL = encodeURIComponent('https://gogoanime.by/');
    const HI_URL = encodeURIComponent('https://hianime.tv/');

    // Simple function to fetch and parse HTML from a URL
    async function fetchAndParse(url) {
      try {
        const response = await fetch(CORS_PROXY + url);
        const data = await response.json();
        const htmlText = data.contents;
        const parser = new DOMParser();
        return parser.parseFromString(htmlText, 'text/html');
      } catch (error) {
        console.error('Error fetching/parsing:', error);
        return null;
      }
    }

    // Example function to extract anime links.
    // You may need to adjust selectors depending on the website's structure.
    function extractAnimeLinks(doc) {
      const links = [];
      // Example: Find all anchor tags that might represent anime titles.
      // (Adjust the selector to match actual site structure.)
      doc.querySelectorAll('a').forEach(a => {
        const href = a.href;
        const text = a.textContent.trim();
        // Simple filter: Only consider links with a non-empty title and containing "anime"
        if (text && href && href.toLowerCase().includes('anime')) {
          links.push({ text, href });
        }
      });
      return links;
    }

    async function loadGogoAnimeLinks() {
      const container = document.getElementById('gogoLinks');
      container.innerHTML = 'Loading...';
      const doc = await fetchAndParse(GOGO_URL);
      if (!doc) {
        container.innerHTML = 'Error fetching data.';
        return;
      }
      const links = extractAnimeLinks(doc);
      if (links.length === 0) {
        container.innerHTML = 'No links found. (Try updating the selectors.)';
        return;
      }
      container.innerHTML = '';
      links.forEach(link => {
        const a = document.createElement('a');
        a.href = link.href;
        a.textContent = link.text;
        a.target = '_blank';
        a.className = 'anime-link';
        container.appendChild(a);
      });
    }

    async function loadHiAnimeLinks() {
      const container = document.getElementById('hiLinks');
      container.innerHTML = 'Loading...';
      const doc = await fetchAndParse(HI_URL);
      if (!doc) {
        container.innerHTML = 'Error fetching data.';
        return;
      }
      const links = extractAnimeLinks(doc);
      if (links.length === 0) {
        container.innerHTML = 'No links found. (Try updating the selectors.)';
        return;
      }
      container.innerHTML = '';
      links.forEach(link => {
        const a = document.createElement('a');
        a.href = link.href;
        a.textContent = link.text;
        a.target = '_blank';
        a.className = 'anime-link';
        container.appendChild(a);
      });
    }

    document.getElementById('fetchGogo').addEventListener('click', loadGogoAnimeLinks);
    document.getElementById('fetchHi').addEventListener('click', loadHiAnimeLinks);
  </script>
</body>
</html>
