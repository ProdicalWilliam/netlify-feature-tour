<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive School Route Map</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #0a0a0a;
            color: #e0e0e0;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 25px;
            background-color: #121212;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(255, 0, 60, 0.2);
            border: 1px solid #333;
        }
        h1 {
            text-align: center;
            color: #ff003c;
            margin-bottom: 25px;
            font-size: 32px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 0, 60, 0.7);
        }
        .map-container {
            position: relative;
            margin: 0 auto 30px;
            max-width: 900px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(126, 0, 255, 0.4);
            border: 1px solid #333;
            height: 600px;
        }
        .map-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .map-image {
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: 0 0;
            transition: transform 0.3s ease;
            cursor: move;
        }
        .map-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,0,60,0.1) 0%, rgba(126,0,255,0.1) 100%);
            pointer-events: none;
            z-index: 2;
        }
        .map-title-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 8px 15px;
            background-color: rgba(10,10,10,0.8);
            color: #ff003c;
            border-radius: 4px;
            font-weight: bold;
            letter-spacing: 1px;
            border: 1px solid #333;
            box-shadow: 0 0 10px rgba(255,0,60,0.3);
            z-index: 5;
        }
        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(10,10,10,0.8);
            border-radius: 8px;
            padding: 15px;
            z-index: 5;
            border: 1px solid #333;
            box-shadow: 0 0 10px rgba(126,0,255,0.3);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .control-group {
            display: flex;
            gap: 5px;
        }
        .control-btn {
            background-color: #1a1a1a;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .control-btn:hover {
            background-color: #2a2a2a;
            border-color: #ff003c;
            box-shadow: 0 0 8px rgba(255,0,60,0.4);
        }
        .control-btn.active {
            background-color: #ff003c;
            color: #fff;
            border-color: #ff003c;
            box-shadow: 0 0 12px rgba(255,0,60,0.6);
        }
        .zoom-level {
            color: #999;
            font-size: 12px;
            text-align: center;
            margin-top: 5px;
        }
        .info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            padding: 10px 15px;
            background-color: rgba(10,10,10,0.8);
            color: #e0e0e0;
            border-radius: 4px;
            border: 1px solid #333;
            font-size: 14px;
            z-index: 5;
            min-width: 200px;
        }
        .info-title {
            color: #ff003c;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .pointer {
            position: absolute;
            width: 16px;
            height: 16px;
            background-color: #ff003c;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 3;
            box-shadow: 0 0 10px rgba(255,0,60,0.7);
            cursor: pointer;
            border: 2px solid #fff;
        }
        .pointer:hover::after {
            content: attr(data-label);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(10,10,10,0.9);
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            margin-bottom: 5px;
            border: 1px solid #ff003c;
        }
        .distance-line {
            position: absolute;
            height: 2px;
            background-color: #7700ff;
            transform-origin: 0 0;
            z-index: 3;
            pointer-events: none;
            box-shadow: 0 0 8px rgba(126,0,255,0.7);
        }
        .distance-label {
            position: absolute;
            background-color: rgba(10,10,10,0.8);
            color: #7700ff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 4;
            pointer-events: none;
            border: 1px solid #7700ff;
            box-shadow: 0 0 8px rgba(126,0,255,0.4);
            transform: translate(-50%, -50%);
        }
        .legend {
            padding: 20px;
            background-color: #1a1a1a;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(126, 0, 255, 0.2);
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        .legend h3 {
            margin-top: 0;
            color: #ff003c;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 22px;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(255, 0, 60, 0.7);
        }
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .legend-item:hover {
            background-color: #252525;
        }
        .legend-color {
            width: 26px;
            height: 26px;
            margin-right: 15px;
            border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.2);
            flex-shrink: 0;
            box-shadow: 0 0 5px rgba(200, 200, 200, 0.1);
        }
        .legend-text {
            font-size: 15px;
            letter-spacing: 0.5px;
        }
        .info-section {
            background-color: #1a1a1a;
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
            border-left: 4px solid #7700ff;
            box-shadow: 0 0 15px rgba(126, 0, 255, 0.2);
        }
        .info-section h3 {
            margin-top: 0;
            color: #7700ff;
            font-size: 20px;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(126, 0, 255, 0.7);
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #333;
            color: #777;
            font-size: 14px;
        }
        .key-highlight {
            display: inline-block;
            padding: 0 5px;
            color: #ff003c;
            font-weight: bold;
        }
        .pointer-input {
            background-color: #1a1a1a;
            border: 1px solid #444;
            border-radius: 4px;
            color: #e0e0e0;
            padding: 5px 8px;
            font-size: 14px;
            margin-top: 5px;
            width: 100%;
        }
        .pointer-input:focus {
            outline: none;
            border-color: #7700ff;
            box-shadow: 0 0 8px rgba(126,0,255,0.4);
        }
        .pointer-dialog {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
            box-shadow: 0 0 15px rgba(255,0,60,0.3);
            z-index: 10;
            width: 250px;
            display: none;
        }
        .dialog-title {
            color: #ff003c;
            font-size: 16px;
            margin-bottom: 10px;
            text-align: center;
        }
        .dialog-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pinellas Park Middle School</h1>
        
        <div class="map-container">
            <div class="map-wrapper" id="mapWrapper">
                <img src="https://i.postimg.cc/7qTFxfG1/Routes.png" alt="School Map with Routes" class="map-image" id="mapImage">
            </div>
            <div class="map-overlay"></div>
            <div class="map-title-overlay">ROUTE MAP</div>
            <div class="map-controls">
                <div class="control-group">
                    <button class="control-btn" id="zoomIn">+</button>
                    <button class="control-btn" id="zoomOut">−</button>
                    <button class="control-btn" id="resetZoom">Reset</button>
                </div>
                <div class="zoom-level" id="zoomLevel">Zoom: 100%</div>
                <div class="control-group">
                    <button class="control-btn" id="pointerTool">Add Pointer</button>
                    <button class="control-btn" id="distanceTool">Measure</button>
                </div>
                <div class="control-group">
                    <button class="control-btn" id="clearAll">Clear All</button>
                </div>
            </div>
            <div class="info-panel">
                <div class="info-title">MAP INFO</div>
                <div id="mapInfo">Click on map to add pointers or measure distances</div>
            </div>
        </div>
        
        <div class="pointer-dialog" id="pointerDialog">
            <div class="dialog-title">Add New Pointer</div>
            <label for="pointerLabel">Label:</label>
            <input type="text" id="pointerLabel" class="pointer-input" placeholder="Enter label...">
            <div class="dialog-buttons">
                <button class="control-btn" id="cancelPointer">Cancel</button>
                <button class="control-btn" id="savePointer">Add</button>
            </div>
        </div>
        
        <div class="legend">
            <h3>NAVIGATION LEGEND</h3>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: red; box-shadow: 0 0 8px rgba(255,0,0,0.7);"></div>
                    <span class="legend-text"><span class="key-highlight">Red Line</span> = Mrs. Becker's Route</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: white; border: 1px solid #666; box-shadow: 0 0 8px rgba(255,255,255,0.4);"></div>
                    <span class="legend-text"><span class="key-highlight">White Line</span> = Mr. Gracia (Omnipresent)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: green; box-shadow: 0 0 8px rgba(0,255,0,0.4);"></div>
                    <span class="legend-text"><span class="key-highlight">Green Line</span> = Building 1 Intern Dog Whistle Lady</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: yellow; box-shadow: 0 0 8px rgba(255,255,0,0.4);"></div>
                    <span class="legend-text"><span class="key-highlight">Yellow Line</span> = Mrs. Ruben (primarily Building 3)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: purple; box-shadow: 0 0 8px rgba(128,0,128,0.7);"></div>
                    <span class="legend-text"><span class="key-highlight">Purple Boxes</span> = Classrooms</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: yellow; opacity: 0.7; box-shadow: 0 0 8px rgba(255,255,0,0.3);"></div>
                    <span class="legend-text"><span class="key-highlight">Yellow Boxes</span> = Buildings</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: green; opacity: 0.7; box-shadow: 0 0 8px rgba(0,255,0,0.3);"></div>
                    <span class="legend-text"><span class="key-highlight">Green Boxes</span> = Walk Paths</span>
                </div>
            </div>
        </div>
        
        <div class="info-section">
            <h3>NAVIGATION GUIDE</h3>
            <p>This tactical map displays common routes taken by key staff members at Pinellas Park Middle School. Use the interactive controls to zoom and analyze specific areas. The pointer tool allows you to mark important locations, while the distance tool helps calculate approximate distances between any two points on campus.</p>
        </div>
        
        <div class="footer">
            © 2025 Campus Navigation System • Updated April 2025
        </div>
    </div>

    <script>
        // Map interaction variables
        let scale = 1;
        let panning = false;
        let pointStart = { x: 0, y: 0 };
        let pointEnd = { x: 0, y: 0 };
        let startPos = { x: 0, y: 0 };
        let currentPos = { x: 0, y: 0 };
        
        // Tool selection variables
        let activeTool = null;
        let measuringPoint1 = null;
        let measuringPoint2 = null;
        let pointerCount = 0;
        let tempPointerCoords = null;
        
        // DOM elements
        const mapWrapper = document.getElementById('mapWrapper');
        const mapImage = document.getElementById('mapImage');
        const zoomInBtn = document.getElementById('zoomIn');
        const zoomOutBtn = document.getElementById('zoomOut');
        const resetZoomBtn = document.getElementById('resetZoom');
        const zoomLevelDisplay = document.getElementById('zoomLevel');
        const pointerToolBtn = document.getElementById('pointerTool');
        const distanceToolBtn = document.getElementById('distanceTool');
        const clearAllBtn = document.getElementById('clearAll');
        const mapInfo = document.getElementById('mapInfo');
        const pointerDialog = document.getElementById('pointerDialog');
        const pointerLabelInput = document.getElementById('pointerLabel');
        const savePointerBtn = document.getElementById('savePointer');
        const cancelPointerBtn = document.getElementById('cancelPointer');
        
        // Map panning functionality
        mapWrapper.addEventListener('mousedown', (e) => {
            if (activeTool) return; // Don't pan if using a tool
            
            panning = true;
            pointStart.x = e.clientX;
            pointStart.y = e.clientY;
            startPos.x = currentPos.x;
            startPos.y = currentPos.y;
        });
        
        mapWrapper.addEventListener('mousemove', (e) => {
            if (!panning) return;
            
            pointEnd.x = e.clientX;
            pointEnd.y = e.clientY;
            
            currentPos.x = startPos.x + (pointEnd.x - pointStart.x);
            currentPos.y = startPos.y + (pointEnd.y - pointStart.y);
            
            mapImage.style.transform = `translate(${currentPos.x}px, ${currentPos.y}px) scale(${scale})`;
        });
        
        mapWrapper.addEventListener('mouseup', () => {
            panning = false;
        });
        
        mapWrapper.addEventListener('mouseleave', () => {
            panning = false;
        });
        
        // Zoom functionality
        zoomInBtn.addEventListener('click', () => {
            scale *= 1.2;
            updateZoom();
        });
        
        zoomOutBtn.addEventListener('click', () => {
            scale /= 1.2;
            if (scale < 0.5) scale = 0.5;
            updateZoom();
        });
        
        resetZoomBtn.addEventListener('click', () => {
            scale = 1;
            currentPos.x = 0;
            currentPos.y = 0;
            updateZoom();
        });
        
        function updateZoom() {
            mapImage.style.transform = `translate(${currentPos.x}px, ${currentPos.y}px) scale(${scale})`;
            zoomLevelDisplay.textContent = `Zoom: ${Math.round(scale * 100)}%`;
        }
        
        // Tool selection functionality
        pointerToolBtn.addEventListener('click', () => {
            if (activeTool === 'pointer') {
                activeTool = null;
                pointerToolBtn.classList.remove('active');
                mapInfo.textContent = 'Click on map to add pointers or measure distances';
            } else {
                activeTool = 'pointer';
                pointerToolBtn.classList.add('active');
                distanceToolBtn.classList.remove('active');
                mapInfo.textContent = 'Click on the map to add a pointer';
            }
        });
        
        distanceToolBtn.addEventListener('click', () => {
            if (activeTool === 'distance') {
                activeTool = null;
                distanceToolBtn.classList.remove('active');
                mapInfo.textContent = 'Click on map to add pointers or measure distances';
                measuringPoint1 = null;
                measuringPoint2 = null;
            } else {
                activeTool = 'distance';
                distanceToolBtn.classList.add('active');
                pointerToolBtn.classList.remove('active');
                mapInfo.textContent = 'Click on first point to start measuring';
                measuringPoint1 = null;
                measuringPoint2 = null;
            }
        });
        
        clearAllBtn.addEventListener('click', () => {
            // Remove all pointers
            document.querySelectorAll('.pointer').forEach(pointer => {
                pointer.remove();
            });
            
            // Remove all distance lines
            document.querySelectorAll('.distance-line').forEach(line => {
                line.remove();
            });
            
            // Remove all distance labels
            document.querySelectorAll('.distance-label').forEach(label => {
                label.remove();
            });
            
            // Reset measuring points
            measuringPoint1 = null;
            measuringPoint2 = null;
            
            // Reset pointer count
            pointerCount = 0;
            
            mapInfo.textContent = 'All markers and measurements cleared';
        });
        
        // Map click handlers for tools
        mapWrapper.addEventListener('click', (e) => {
            if (panning) return;
            
            // Get click coordinates relative to map
            const rect = mapWrapper.getBoundingClientRect();
            const x = (e.clientX - rect.left - currentPos.x) / scale;
            const y = (e.clientY - rect.top - currentPos.y) / scale;
            
            if (activeTool === 'pointer') {
                tempPointerCoords = { x, y };
                pointerDialog.style.display = 'block';
                pointerLabelInput.focus();
            } else if (activeTool === 'distance') {
                if (!measuringPoint1) {
                    // Set first point
                    measuringPoint1 = { x, y };
                    mapInfo.textContent = 'Click on second point to complete measurement';
                    
                    // Add a temporary pointer for the first point
                    const pointer = document.createElement('div');
                    pointer.className = 'pointer';
                    pointer.style.left = `${x * scale + currentPos.x}px`;
                    pointer.style.top = `${y * scale + currentPos.y}px`;
                    pointer.id = 'tempMeasurePoint';
                    mapWrapper.appendChild(pointer);
                } else {
                    // Set second point
                    measuringPoint2 = { x, y };
                    
                    // Remove the temporary pointer
                    document.getElementById('tempMeasurePoint').remove();
                    
                    // Calculate distance (in pixels, which we could convert to a real unit if we had a scale)
                    const dx = measuringPoint2.x - measuringPoint1.x;
                    const dy = measuringPoint2.y - measuringPoint1.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx);
                    
                    // Create the distance line
                    const line = document.createElement('div');
                    line.className = 'distance-line';
                    const lineLength = Math.sqrt(dx * dx + dy * dy);
                    line.style.width = `${lineLength * scale}px`;
                    line.style.left = `${measuringPoint1.x * scale + currentPos.x}px`;
                    line.style.top = `${measuringPoint1.y * scale + currentPos.y}px`;
                    line.style.transform = `rotate(${angle}rad)`;
                    mapWrapper.appendChild(line);
                    
                    // Create the distance label
                    const label = document.createElement('div');
                    label.className = 'distance-label';
                    label.textContent = `${Math.round(distance)} pixels`;
                    label.style.left = `${(measuringPoint1.x + measuringPoint2.x) / 2 * scale + currentPos.x}px`;
                    label.style.top = `${(measuringPoint1.y + measuringPoint2.y) / 2 * scale + currentPos.y}px`;
                    mapWrapper.appendChild(label);
                    
                    // Reset for next measurement
                    measuringPoint1 = null;
                    measuringPoint2 = null;
                    mapInfo.textContent = 'Distance measured. Click again for a new measurement.';
                }
            }
        });
        
        // Pointer dialog functionality
        savePointerBtn.addEventListener('click', () => {
            if (!tempPointerCoords) return;
            
            const label = pointerLabelInput.value.trim() || `Point ${++pointerCount}`;
            
            // Create the pointer
            const pointer = document.createElement('div');
            pointer.className = 'pointer';
            pointer.style.left = `${tempPointerCoords.x * scale + currentPos.x}px`;
            pointer.style.top = `${tempPointerCoords.y * scale + currentPos.y}px`;
            pointer.setAttribute('data-label', label);
            pointer.setAttribute('data-x', tempPointerCoords.x);
            pointer.setAttribute('data-y', tempPointerCoords.y);
            mapWrapper.appendChild(pointer);
            
            // Close dialog and reset
            pointerDialog.style.display = 'none';
            pointerLabelInput.value = '';
            tempPointerCoords = null;
            mapInfo.textContent = `Pointer "${label}" added`;
        });
        
        cancelPointerBtn.addEventListener('click', () => {
            pointerDialog.style.display = 'none';
            pointerLabelInput.value = '';
            tempPointerCoords = null;
        });
        
        // Update elements position when zooming
        function updateElementsOnZoom() {
            // Update pointers
            document.querySelectorAll('.pointer').forEach(pointer => {
                const x = parseFloat(pointer.getAttribute('data-x'));
                const y = parseFloat(pointer.getAttribute('data-y'));
                pointer.style.left = `${x * scale + currentPos.x}px`;
                pointer.style.top = `${y * scale + currentPos.y}px`;
            });
            
            // More complex: update distance lines and labels
            // This would need to store the original points and recalculate
            // For simplicity, we're clearing these when zooming changes
            document.querySelectorAll('.distance-line').forEach(line => line.remove());
            document.querySelectorAll('.distance-label').forEach(label => label.remove());
        }
        
        // Add event listeners to update elements on zoom
        zoomInBtn.addEventListener('click', updateElementsOnZoom);
        zoomOutBtn.addEventListener('click', updateElementsOnZoom);
        resetZoomBtn.addEventListener('click', updateElementsOnZoom);
        
        // Initialize the map
        window.onload = function() {
            mapImage.onload = function() {
                mapWrapper.style.width = '100%';
                mapWrapper.style.height = '100%';
                updateZoom();
            };
        };
    </script>
</body>
</html>
