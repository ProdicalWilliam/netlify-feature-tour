
<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1491475615360477"
     crossorigin="anonymous"></script>
<script>
function loadGoogleAnalytics() {
  const ga = document.createElement('script');
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-GQJV75X3BT';
  ga.async = true;
  document.head.appendChild(ga);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  window.gtag = gtag;
  gtag('js', new Date());
  gtag('config', 'G-GQJV75X3BT');
}

function loadClarity() {
  (function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r); t.async=1; t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "qtvkhffiph");
}

function initTracking() {
  if (localStorage.getItem('cookieConsent') === 'accepted') {
    loadGoogleAnalytics();
    loadClarity();
  }
}

document.addEventListener('DOMContentLoaded', initTracking);
document.getElementById('acceptCookies')?.addEventListener('click', () => {
  loadGoogleAnalytics();
  loadClarity();
});
</script>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schedule1-Calculator</title>
  <!-- Bootstrap CSS (for JS components) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles_new.css?v=1744078772"> 

</head>
<body class="text-foreground" style="background-color: hsl(var(--background));">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.tailwindcss.com"></script>

<header class="sticky top-0 z-50 w-full border-b border-border/10 bg-background/80 backdrop-blur-xl supports-[backdrop-filter]:bg-background/20">
  <div class="container mx-auto flex h-16 items-center justify-between px-6">
    <!-- Brand -->
    <a href="index.php" class="text-2xl font-bold">
      <span class="navspan">Schedule1</span>-Calculator
    </a>

    <!-- MOBILE Version Selector -->
    <div class="d-md-none ms-3">
      <select id="versionSelectMobile" class="form-select form-select-sm"
              onchange="fetch('', {method:'POST', headers:{'Content-Type':'application/x-www-form-urlencoded'}, body:'version='+this.value}).then(()=>location.reload())">
        <option value="BETA" > Demo</option>
        <option value="CURRENT" selected> Current Version</option>
      </select>
    </div>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center space-x-8 text-sm font-medium">
      <a href="calc.php" class="hover:text-primary">Mixing Calculator</a>
      <a href="reverse.php" class="hover:text-primary">Reverse Calculator</a>
      <a href="howitworks.php" class="hover:text-primary">How Mixing Works</a>
      <a href="all_seeds.php" class="hover:text-primary">All Seeds</a>
      <a href="all_users.php" class="hover:text-primary">All Users</a>
    </nav>

    <!-- Actions (Desktop) -->
    <div class="hidden md:flex items-center space-x-4">
      <!-- Donate Button (with modal trigger) -->
      <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#donationModal">
        <img src="img/Ko-fi_COIN.gif" alt="Ko‑fi Coin" class="btn-icon mr-2">Donate
      </button>
      <div class="relative">
        <button id="versionDropdownButton" class="flex items-center px-4 py-1 bg-secondary rounded hover:bg-primary/10">
          Version: <span id="currentVersion"> Current</span>
          <i class="fa-solid fa-chevron-down ml-2"></i>
        </button>
        <ul id="versionDropdownMenu" class="hidden absolute right-0 mt-2 w-40 bg-card border rounded shadow-lg">
          <li><a href="#" class="block px-4 py-2 version-option" data-version="BETA">Demo</a></li>
          <li><a href="#" class="block px-4 py-2 version-option" data-version="CURRENT">Current</a></li>
        </ul>
      </div>

            <a href="login.php" class="px-4 py-1 bg-success rounded">Login</a>
      <a href="register.php" class="px-4 py-1 bg-primary rounded">Register</a>
          </div>

    <!-- Mobile Toggle -->
    <button id="mobile-menu-button" class="md:hidden p-2 rounded hover:bg-primary/10">
      <i class="fa-solid fa-bars text-xl"></i>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden bg-background/90 border-t border-border">
    <nav class="flex flex-col px-6 py-4 space-y-2 text-sm font-medium">
      <a href="calc.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-calculator mr-2"></i>Mixing Calculator</a>
      <a href="reverse.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-rotate-left mr-2"></i>Reverse Calculator</a>
      <a href="howitworks.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-info-circle mr-2"></i>How Mixing Works</a>
      <a href="all_seeds.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-seedling mr-2"></i>All Seeds</a>
      <a href="all_users.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-seedling mr-2"></i>All Users</a>
      <hr>
      <a href="https://ko-fi.com/S6S31BYL3L" class="hover:bg-secondary/20 rounded px-3 py-2 text-warning"  data-bs-toggle="modal" data-bs-target="#donationModal"><img src="img/Ko-fi_COIN.gif" class="btn-icon mr-2">Donate</a>
              <a href="login.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-sign-in-alt mr-2"></i>Login</a>
        <a href="register.php" class="hover:bg-secondary/20 rounded px-3 py-2"><i class="fa-solid fa-user-plus mr-2"></i>Register</a>
          </nav>
  </div>



<script>
    ['mobile-menu-button','versionDropdownButton','userMenuButton'].forEach(id=>{
      const btn=document.getElementById(id);
      if(btn) btn.onclick=()=>{
        const menu=document.getElementById(id==='mobile-menu-button'?'mobile-menu':id==='versionDropdownButton'?'versionDropdownMenu':'userDropdown');
        menu.classList.toggle('hidden');
      };
    });
    document.addEventListener('click',e=>{
      ['versionDropdownMenu','userDropdown','mobile-menu'].forEach(menuId=>{
        const menu=document.getElementById(menuId);
        const btn=document.getElementById(menuId==='versionDropdownMenu'?'versionDropdownButton': menuId==='userDropdown'?'userMenuButton':'mobile-menu-button');
        if(menu && !menu.contains(e.target) && !btn.contains(e.target)) menu.classList.add('hidden');
      });
    });
    document.querySelectorAll(".version-option").forEach(item=>{
      item.onclick=e=>{
        e.preventDefault();
        const ver=item.dataset.version;
        document.getElementById("currentVersion").innerText = ver==='CURRENT'?'CURRENT':'BETA';
        fetch("",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"version="+ver})
          .then(()=>location.reload());
      };
    });
  </script>

</header>
<div class="p-4 rounded shadow text-center" style="background-color: hsl(var(--warning)); color: hsl(var(--warning-foreground));">
  I would like to thank those that were initially running scripts and bots through the website. It has been noticable that most of you have ceased doing so. Unfortunately, this does not mean this current website will receive updates yet.<br>
  We are focusing hard on preparing the overhauled version of the website; which features a better backend, faster algorithms and tighter security. For those of you that were running scripts and bots, the new page will feature scripts and data: Open Source.<br>
  Thanks for using Schedule1-Calculator.<br> IF YOU HAVE NOT RECEIVED DONOR STATUS AFTER DONATING CONTACT ME VIA DISCORD. @shibkuh
</div>

  <header class="text-center mb-5">
    <h1 class="display-4 navspan">Mixing Calculator</h1>
    <p class="lead">
      Select a <span class="font-semibold">Product Type</span>, then pick substances one at a time — a new dropdown appears automatically after each selection.  
      Click <span class="font-semibold">Mix!</span> to calculate your batch’s Effects, Cost, and Sell Price.<br>  
      When you’re done adding ingredients, press <span class="font-semibold">Finalize Mix</span> to lock in your result and generate a shareable seed.
    </p>

  </header>

  <!-- Alert Section (if CURRENT version) -->
    <section class="container mx-auto px-4 my-8">
    <div class="p-4 rounded shadow" style="background-color: hsl(var(--warning)); color: hsl(var(--warning-foreground));">
      With the full release among us, the rules are still iffy. We spent the past 14+ days scouring every inch of the mixing process to try and get this as perfect as possible.
      If you encounter a mix that <strong>Does Not</strong> match the in-game mix, please copy your seed and DM it to @Shibkuh on Discord. Or, use the
      <span class="underline">Contact Us</span> link at the bottom of this page. Thanks for using Schedule1-Calculator!
    </div>
  </section>
  
  <!-- Seed Input Section -->
  <section class="container mx-auto px-4 my-8">
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <input type="text" id="seedInput" placeholder="Enter Mix Seed" class="w-full sm:w-1/2 p-3 rounded border" style="border-color: hsl(var(--border)); background-color: hsl(var(--input)); color: hsl(var(--foreground));" 
             onfocus="this.style.outline='none'; this.style.boxShadow='0 0 0 2px hsl(var(--ring))'">
      <button class="px-6 py-3 btn-custom bg-success" onclick="loadMixFromSeed()">Load Mix</button>
    </div>
  </section>

  <!-- Mixing Forms Section -->
    <section id="mix-section" class="w-full bg-card p-4">
      <div id="mix-forms" class="flex flex-col gap-4">
      </div>
    </section>


  <!-- Control Buttons Section -->
  <section class="container mx-auto px-4 my-8">
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <button id="addMixButton" class="px-6 py-3 btn-custom" style="background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground));" onclick="addMixForm()">+ Add Mix</button>
      <button class="px-6 py-3 btn-custom" style="background-color: hsl(var(--destructive)); color: hsl(var(--destructive-foreground));" onclick="confirmReset()">Start Over</button>
      <button id="finalizeMixButton" class="px-6 py-3 btn-custom bg-success" onclick="finalizeMix(mixCount)">Finalize Mix</button>
    </div>
  </section>

  

  <!-- Color Legend Section -->
  <section class="container mx-auto px-4 my-8">
    <div class="p-4 rounded shadow" style="background-color: hsl(var(--card));">
      <h4 class="text-2xl font-bold text-center mb-4">What do the colors mean?</h4>
      <ul class="list-disc list-inside text-lg">
        <li><span class="font-bold" style="color: hsl(var(--primary));">Green</span> – The Substance was used and modified the overall Effects.</li>
        <li>
          <span class="font-bold" style="color: orange;">Orange</span> – The Substance was used and did NOT modify the overall Effects.
          <small class="block text-sm" style="color: hsl(var(--muted-foreground));">These substances are still added, and this is reflected in the cost.</small>
        </li>
        <li><span class="font-bold" style="color: hsl(var(--destructive));">Red</span> – These products were either duplicates, performed no changes, or could not be added due to the 8 effect limit.</li>
      </ul>
    </div>
  </section>

  <!-- Disclaimer Section -->
  <section class="container mx-auto px-4 my-8">
    <div class="p-4 rounded shadow" style="background-color: hsl(var(--warning)); color: hsl(var(--warning-foreground));">
      <p>
        This website is an independent fan project inspired by the video game <strong>"Schedule 1."</strong> While some contributors from the original development team are involved, this site is not an official extension of the game and is intended solely for community engagement.
        We do not promote, condone, or encourage the use, possession, or handling of any illegal substances.
      </p>
    </div>
  </section>
  
  <!-- Donation Modal -->
<div class="modal fade" id="donationModal" tabindex="-1" aria-labelledby="donationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title navspan" id="donationModalLabel">Important Donation Information! Please Read before donating!</h2>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>To ensure your donation processes properly, please make sure you have an account on the Schedule1-Calculator website.</p>
        <p>Additionally, use the same email address for both your Schedule1-Calculator account and Ko-fi account for seamless integration.</p>
        <p>If you encounter any issues, feel free to reach out to <strong>@shibkuh</strong> on Discord for assistance.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="proceedToKoFi">Proceed to Ko-fi</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="seedModal" tabindex="-1" aria-labelledby="seedModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="background-color: hsl(var(--card)); color: hsl(var(--card-foreground));">
      <div class="modal-header border-b" style="border-color: hsl(var(--border));">
        <h5 class="modal-title text-lg font-semibold" id="seedModalLabel">Mix Seed</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
      </div>
      <div class="modal-body">
        <p id="seedContent" class="break-words"></p>
        <p class="mt-3">
          Share this seed with others by creating an account or logging in and uploading your seed.
        </p>
      </div>
      <div class="modal-footer border-t" style="border-color: hsl(var(--border));">
        <a id="viewSeedBtn" class="px-4 py-2 btn-custom" style="background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground));" href="" target="_blank">Show me in calculator</a>
        <button id="copySeedBtn" type="button" class="px-4 py-2 btn-custom" style="background-color: hsl(var(--accent)); color: hsl(var(--accent-foreground));">Copy</button>
                <a id="uploadSeedBtn" class="px-4 py-2 btn-custom cursor-not-allowed" style="background-color: hsl(var(--accent)); color: hsl(var(--accent-foreground));" disabled title="Log in to upload seed">Upload Seed</a>
              </div>
    </div>
  </div>
</div>

<!-- Contact Modal -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="background-color: hsl(var(--card)); color: hsl(var(--card-foreground));">
      
      <!-- Normal form post to php/contact.php -->
      <form method="POST" action="php/contact.php">
        <div class="modal-header border-b" style="border-color: hsl(var(--border));">
          <h5 class="modal-title text-lg font-semibold" id="contactModalLabel">Contact Us</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
        </div>
        <div class="modal-body space-y-4">
          <div>
            <label for="name" class="block mb-1 font-medium">Your Name</label>
            <input type="text"
                   class="w-full p-2 rounded border"
                   style="border-color: hsl(var(--border)); background-color: hsl(var(--input)); color: hsl(var(--foreground));"
                   id="name" name="name" required>
          </div>
          <div>
            <label for="email" class="block mb-1 font-medium">Your Email</label>
            <input type="email"
                   class="w-full p-2 rounded border"
                   style="border-color: hsl(var(--border)); background-color: hsl(var(--input)); color: hsl(var(--foreground));"
                   id="email" name="email" required>
          </div>
          <div>
            <label for="reason" class="block mb-1 font-medium">Subject / Reason</label>
            <select class="w-full p-2 rounded border"
                    style="border-color: hsl(var(--border)); background-color: hsl(var(--input)); color: hsl(var(--foreground));"
                    id="reason" name="reason" required>
              <option value="bug_report">Bug Report</option>
              <option value="website_issues">Website Issues</option>
              <option value="login_issues">Login Issues</option>
              <option value="seed_issues">Seed Issues</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div>
            <label for="message" class="block mb-1 font-medium">Your Message</label>
            <textarea class="w-full p-2 rounded border"
                      style="border-color: hsl(var(--border)); background-color: hsl(var(--input)); color: hsl(var(--foreground));"
                      id="message" name="message" rows="4" required></textarea>
          </div>
        </div>
        <div class="modal-footer border-t pt-3" style="border-color: hsl(var(--border));">
          <!-- name="submit" so contact.php sees $_POST['submit'] -->
          <button type="submit" name="submit"
                  class="px-4 py-2 btn-custom"
                  style="background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground));">
            Send Message
          </button>
          <button type="button" class="px-4 py-2 btn-custom"
                  style="background-color: hsl(var(--muted)); color: hsl(var(--muted-foreground));"
                  data-bs-dismiss="modal">
            Close
          </button>
        </div>
      </form>

    </div>
  </div>
</div>



<!-- Cookie Consent Banner -->
<div id="cookieBanner" class="fixed bottom-0 left-0 w-full bg-gray-800 text-white p-4 flex flex-col md:flex-row items-center justify-between space-y-2 md:space-y-0 transition-transform duration-300">
  <p class="flex-1 text-center md:text-left">
    We use cookies to improve your experience. By clicking “Accept” you consent to our use of cookies. 
    <a href="privacy.php#cookies" class="underline">Learn more</a>.
  </p>
  <div class="flex gap-2">
    <button id="denyCookies" class="px-4 py-2 bg-red-600 rounded hover:bg-red-700">Deny</button>
    <button id="acceptCookies" class="px-4 py-2 bg-green-600 rounded hover:bg-green-700">Accept</button>
  </div>
</div>

<footer class="bg-card text-card-foreground py-8 border-t border-border">
  <div class="container mx-auto px-4 space-y-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <h5 class="font-semibold text-lg mb-2">About</h5>
        <p>A fan project inspired by Schedule 1.</p>
      </div>
      <div>
        <h5 class="font-semibold text-lg mb-2">Quick Links</h5>
        <ul class="space-y-1">
          <li><a href="terms.php" class="hover:underline">Terms of Service</a></li>
          <li><a href="privacy.php" class="hover:underline">Privacy Policy</a></li>
          <li><a href="#" class="hover:underline" data-bs-toggle="modal" data-bs-target="#contactModal">Contact Us</a> (This works again...)</li>
          <li><a id="cookieSettingsBtn" class="hover:underline">Cookie Settings</a></li>
        </ul>
      </div>
      <div>
        <h5 class="font-semibold text-lg mb-2">Credits</h5>
        <ul class="list-disc pl-5 space-y-1 text-sm">
          <li><strong><a href="user.php?userid=2">@Shibka</a> (Shane R)</strong> — Creator, Mix Specialist</li>
          <li><strong><a href="user.php?userid=3">@dangdoopdewc</a></strong> — Spreadsheet Master, Mix Specialist</li>
          <li><strong><a href="user.php?userid=36">@TMafono</a></strong> — In-Game Mixing, Mix Specialist</li>
          <li><strong>@King ToasterBath</strong> - In-Game Mixing</li>
          <li><strong>@froggy</strong> — Modder, Pricing Equations/Formulas</li>
        </ul>
      </div>
    </div>
    <hr class="border-border">
    <p class="text-center text-sm">&copy; <span id="currentYear"></span> Schedule1‑Calculator. All rights reserved.</p>
  </div>
</footer>

<script>
const banner = document.getElementById('cookieBanner');
const acceptBtn = document.getElementById('acceptCookies');
const denyBtn = document.getElementById('denyCookies');
const settingsBtn = document.getElementById('cookieSettingsBtn');

function hideBanner() {
  banner.style.transform = 'translateY(100%)';
}

function setConsent(value) {
  localStorage.setItem('cookieConsent', value);
  hideBanner();
}

document.addEventListener('DOMContentLoaded', () => {
  const consent = localStorage.getItem('cookieConsent');
  if (!consent) return; // first‑time: show banner
  hideBanner();
});

acceptBtn.addEventListener('click', () => setConsent('accepted'));
denyBtn.addEventListener('click', () => setConsent('denied'));
settingsBtn.addEventListener('click', () => banner.style.transform = 'translateY(0)');

document.getElementById('proceedToKoFi').addEventListener('click', function() {
  var koFiUrl = "https://ko-fi.com/S6S31BYL3L"; // Replace with your Ko-fi link
  window.location.href = koFiUrl;
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const contactForm = document.getElementById("contactForm");
  const contactModal = document.getElementById("contactModal");
  const bootstrapModal = new bootstrap.Modal(contactModal); 
  // We'll use this to hide the modal programmatically

  contactForm.addEventListener("submit", async (event) => {
    event.preventDefault(); // Stop the full page reload

    // 1) Hide the modal right away (or wait until the request finishes if you prefer)
    bootstrapModal.hide();

    // 2) Gather form data
    const formData = new FormData(contactForm);
    // Our script checks for $_POST['submit'], so let's ensure that's set
    formData.append("submit", "true");

    try {
      const response = await fetch("php/contact.php", {
        method: "POST",
        body: formData
      });

      // If contact.php returns a text success or prints out HTML, we can parse it:
      const resultText = await response.text();
      console.log("Server responded with:", resultText);

      if (response.ok) {
        // Show a success message
        alert("Message sent successfully!");
        contactForm.reset();
      } else {
        // Show an error
        alert("Failed to send message. Please try again later.");
      }
    } catch (error) {
      console.error("Error sending contact form:", error);
      alert("Error: Could not send form. Please try again later.");
    }
  });
});
</script>


  

  <!-- Bootstrap JS (for modal functionality) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- LZ-String -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
  <script>
    var sessionVersion = "CURRENT";
    var jsonFile = (sessionVersion === "CURRENT") ? "mix_effects_dataV0.4.json" : "mix_effects_data.json";
    console.log("sessionVersion:", sessionVersion);
    console.log("jsonFile:", jsonFile);
  </script>
  
<script src="mix_script_current.js?v=1744078772"></script>


  <script>
    document.getElementById("currentYear").textContent = new Date().getFullYear();
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1491475615360477" crossorigin="anonymous"></script>
</body>
</html>
