<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dark Neon Mix Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Favicon -->
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/4819/4819604.png" type="image/png" />

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet" />
  <!-- Animate.css for animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  
  <!-- Firebase App, Auth -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <style>
    body {
      background: linear-gradient(to bottom, #000000, #2b0b44);
      color: #d2d2d2;
      font-family: "Inter", sans-serif;
      min-height: 100vh;
    }
    .neon-accent {
      color: #A3FFA3;
    }
    .neon-accent-bg {
      background-color: rgba(163,255,163,0.07);
    }
    .trans-card {
      background-color: rgba(255,255,255,0.05);
      backdrop-filter: blur(6px);
    }
    .rounded-xl { border-radius: 1rem; }
  </style>
</head>
<body class="flex flex-col">

<!-- Firebase Config -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDTATBOCPb_uGYt5Trmx1EZu7doCR0WWvw",
    authDomain: "spotify-795ab.firebaseapp.com",
    databaseURL: "https://spotify-795ab-default-rtdb.firebaseio.com",
    projectId: "spotify-795ab",
    storageBucket: "spotify-795ab.firebasestorage.app",
    messagingSenderId: "907464366407",
    appId: "1:907464366407:web:1c736b0a36c792ffdb1462",
    measurementId: "G-R6R08XWLMF"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
</script>

<!-- Login Overlay -->
<div id="loginOverlay" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50 p-4">
  <div class="trans-card rounded-xl p-6 w-full max-w-md animate__animated animate__fadeInDown">
    <h2 class="text-2xl font-bold text-center mb-4">Login</h2>
    <form id="loginForm" class="flex flex-col space-y-4">
      <input
        id="emailInput"
        type="email"
        placeholder="Email"
        class="w-full p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-purple-400"
        required
      />
      <input
        id="passwordInput"
        type="password"
        placeholder="Password"
        class="w-full p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-purple-400"
        required
      />
      <button
        id="loginBtn"
        type="submit"
        class="bg-purple-600 hover:bg-purple-800 text-white py-2 rounded transition duration-200 font-semibold"
      >
        Login
      </button>
    </form>
  </div>
</div>

<!-- Main App -->
<div id="mainApp" class="hidden flex-1 flex flex-col animate__animated animate__fadeInUp">
  <!-- Header -->
  <header class="flex justify-between items-center p-4 neon-accent-bg">
    <h1 class="text-3xl font-bold neon-accent">Dark Neon Mix Calculator</h1>
    <button
      id="logoutBtn"
      class="bg-purple-700 hover:bg-purple-900 text-white px-4 py-2 rounded font-medium"
    >
      Logout
    </button>
  </header>

  <!-- Content -->
  <main class="p-4 space-y-6">
    <!-- Display Some Example Recipes -->
    <section class="space-y-4">
      <h2 class="text-2xl font-bold neon-accent-bg p-2 inline-block rounded">Featured Recipes</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
        <!-- Each Recipe Card -->
        <div class="trans-card rounded-xl p-4 hover:scale-105 transition transform duration-300">
          <h3 class="text-lg font-semibold mb-1">beginner-friendly for Sour Diesel</h3>
          <p class="text-sm mb-1"><strong>Based on:</strong> Sour Diesel</p>
          <p class="text-sm mb-1"><strong>Effects:</strong> Refreshing, Bright-Eyed</p>
          <p class="text-sm"><strong>Profit:</strong> $45.00</p>
        </div>
        <div class="trans-card rounded-xl p-4 hover:scale-105 transition transform duration-300">
          <h3 class="text-lg font-semibold mb-1">Base 1 substance recipe of Coca</h3>
          <p class="text-sm mb-1"><strong>Based on:</strong> Cocaine</p>
          <p class="text-sm mb-1"><strong>Effects:</strong> Jennerising</p>
          <p class="text-sm"><strong>Profit:</strong> $205.00</p>
        </div>
        <div class="trans-card rounded-xl p-4 hover:scale-105 transition transform duration-300">
          <h3 class="text-lg font-semibold mb-1">beginner-friendly for OG Kush</h3>
          <p class="text-sm mb-1"><strong>Based on:</strong> OG Kush</p>
          <p class="text-sm mb-1"><strong>Effects:</strong> Sneaky, Gingeritis</p>
          <p class="text-sm"><strong>Profit:</strong> $48.00</p>
        </div>
        <div class="trans-card rounded-xl p-4 hover:scale-105 transition transform duration-300">
          <h3 class="text-lg font-semibold mb-1">beginner-friendly for Green Crack</h3>
          <p class="text-sm mb-1"><strong>Based on:</strong> Green Crack</p>
          <p class="text-sm mb-1"><strong>Effects:</strong> Energizing, Spicy</p>
          <p class="text-sm"><strong>Profit:</strong> $49.00</p>
        </div>
      </div>
    </section>

    <!-- Mixing Calculator -->
    <section class="trans-card rounded-xl p-6">
      <h2 class="text-xl font-semibold mb-4">Mixing Calculator</h2>
      <label class="block font-medium mb-2">Base Product</label>
      <select
        id="baseProductSelect"
        class="w-full mb-4 p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-purple-400"
      >
        <option disabled selected>Select a base product</option>
      </select>
      <label class="block font-medium mb-2">Substances</label>
      <div id="substancesContainer" class="flex flex-wrap gap-2 mb-2"></div>
      <select
        id="substancesSelect"
        class="w-full mb-4 p-2 rounded text-black focus:outline-none focus:ring-2 focus:ring-purple-400"
      >
        <option disabled selected value="">Substances</option>
      </select>
      <button
        id="mixButton"
        class="bg-green-600 hover:bg-green-800 text-white py-2 w-full rounded font-medium disabled:bg-gray-600 transition duration-200"
        disabled
      >
        Mix
      </button>
    </section>

    <!-- Mix Results Card -->
    <section id="resultCard" class="hidden trans-card rounded-xl p-6 space-y-4 animate__animated animate__fadeIn">
      <div class="mb-3">
        <h3 id="resultTitle" class="text-xl font-bold"></h3>
        <p id="resultSub" class="text-sm"></p>
      </div>
      <div id="effectsContainer" class="flex flex-wrap gap-2"></div>
      <div class="grid grid-cols-3 text-center gap-2 mt-3">
        <div>
          <p class="text-sm">Cost:</p>
          <p id="costDisplay" class="font-bold text-gray-100"></p>
        </div>
        <div>
          <p class="text-sm">Price:</p>
          <p id="priceDisplay" class="font-bold text-gray-100"></p>
        </div>
        <div>
          <p class="text-sm">Profit:</p>
          <p id="profitDisplay" class="font-bold text-green-400"></p>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
  // Login with Email/Password
  const loginOverlay = document.getElementById('loginOverlay');
  const mainApp = document.getElementById('mainApp');
  const loginForm = document.getElementById('loginForm');
  const emailInput = document.getElementById('emailInput');
  const passwordInput = document.getElementById('passwordInput');
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');

  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const email = emailInput.value;
    const pass = passwordInput.value;
    firebase.auth().signInWithEmailAndPassword(email, pass)
      .then(() => {})
      .catch((err) => {
        // If user doesn't exist, attempt signUp
        firebase.auth().createUserWithEmailAndPassword(email, pass)
          .then(() => {})
          .catch((error) => {
            alert(error.message);
          });
      });
  });

  logoutBtn.addEventListener('click', () => {
    firebase.auth().signOut();
  });

  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      loginOverlay.classList.add('hidden');
      mainApp.classList.remove('hidden');
    } else {
      loginOverlay.classList.remove('hidden');
      mainApp.classList.add('hidden');
    }
  });

  // Data
  const productTypes = {
    "Sour Diesel": { basePrice: 35, baseEffects: ["Refreshing"] },
    "OG Kush": { basePrice: 35, baseEffects: ["Calming"] },
    "Green Crack": { basePrice: 35, baseEffects: ["Energizing"] },
    "Granddaddy Purple": { basePrice: 35, baseEffects: ["Sedating"] },
    "Cocaine": { basePrice: 150, baseEffects: [] },
    "Meth": { basePrice: 70, baseEffects: [] }
  };
  const substancesData = {
    "Banana": { defaultEffect: "Gingeritis", price: 2 },
    "Cuke": { defaultEffect: "Energizing", price: 2 },
    "Paracetamol": { defaultEffect: "Sneaky", price: 3 },
    "Donut": { defaultEffect: "Calorie-Dense", price: 3 },
    "Viagra": { defaultEffect: "Tropic Thunder", price: 4 },
    "Mouth Wash": { defaultEffect: "Balding", price: 4 },
    "Flu Medicine": { defaultEffect: "Sedating", price: 5 },
    "Gasoline": { defaultEffect: "Toxic", price: 5 },
    "Energy Drink": { defaultEffect: "Athletic", price: 6 },
    "Motor Oil": { defaultEffect: "Slippery", price: 6 },
    "Mega Bean": { defaultEffect: "Foggy", price: 7 },
    "Chili": { defaultEffect: "Spicy", price: 7 },
    "Battery": { defaultEffect: "Bright-Eyed", price: 8 },
    "Iodine": { defaultEffect: "Jennerising", price: 8 },
    "Addy": { defaultEffect: "Thought-Provoking", price: 9 },
    "Horse Semen": { defaultEffect: "Long Faced", price: 9 }
  };

  // Calculator
  const baseProductSelect = document.getElementById('baseProductSelect');
  const substancesSelect = document.getElementById('substancesSelect');
  const substancesContainer = document.getElementById('substancesContainer');
  const mixButton = document.getElementById('mixButton');
  const resultCard = document.getElementById('resultCard');
  const resultTitle = document.getElementById('resultTitle');
  const resultSub = document.getElementById('resultSub');
  const effectsContainer = document.getElementById('effectsContainer');
  const costDisplay = document.getElementById('costDisplay');
  const priceDisplay = document.getElementById('priceDisplay');
  const profitDisplay = document.getElementById('profitDisplay');

  let selectedBaseProduct = null;
  let selectedSubstances = [];

  Object.keys(productTypes).forEach((productName) => {
    const opt = document.createElement('option');
    opt.value = productName;
    opt.textContent = productName;
    baseProductSelect.appendChild(opt);
  });
  Object.keys(substancesData).forEach((subName) => {
    const opt = document.createElement('option');
    opt.value = subName;
    opt.textContent = subName;
    substancesSelect.appendChild(opt);
  });

  baseProductSelect.addEventListener('change', (e) => {
    selectedBaseProduct = e.target.value;
    checkIfMixReady();
  });
  substancesSelect.addEventListener('change', (e) => {
    const sub = e.target.value;
    if (!selectedSubstances.includes(sub) && sub) {
      selectedSubstances.push(sub);
      e.target.selectedIndex = 0;
      renderSubstanceTags();
      checkIfMixReady();
    }
  });

  mixButton.addEventListener('click', () => {
    if (!selectedBaseProduct || !selectedSubstances.length) return;
    const baseInfo = productTypes[selectedBaseProduct];
    let totalCost = baseInfo.basePrice;
    let effects = [...(baseInfo.baseEffects || [])];
    selectedSubstances.forEach((s) => {
      totalCost += substancesData[s].price;
      effects.push(substancesData[s].defaultEffect);
    });
    // Example logic: Price is cost + markup
    const price = totalCost + 150;
    const profit = price - totalCost;

    resultTitle.textContent = "Your Mix Results";
    resultSub.textContent = selectedBaseProduct + " Mix";
    effectsContainer.innerHTML = "";
    effects.forEach((eff) => {
      const effChip = document.createElement('span');
      effChip.className = "inline-flex items-center rounded-full bg-purple-600 text-white px-3 py-1 text-sm font-semibold";
      effChip.textContent = eff;
      effectsContainer.appendChild(effChip);
    });
    costDisplay.textContent = "$" + totalCost;
    priceDisplay.textContent = "$" + price;
    profitDisplay.textContent = "$" + profit;

    resultCard.classList.remove('hidden');
    resultCard.classList.remove('animate__fadeOut');
    resultCard.classList.add('animate__fadeIn');
  });

  function renderSubstanceTags() {
    substancesContainer.innerHTML = "";
    selectedSubstances.forEach((sub) => {
      const tag = document.createElement('span');
      tag.className = "inline-flex items-center rounded-full bg-green-600 text-white px-3 py-1 text-sm font-semibold";
      tag.textContent = sub;
      const removeBtn = document.createElement('button');
      removeBtn.textContent = "Ã—";
      removeBtn.className = "ml-2 text-red-300 hover:text-red-500";
      removeBtn.addEventListener('click', () => {
        selectedSubstances = selectedSubstances.filter((x) => x !== sub);
        renderSubstanceTags();
        checkIfMixReady();
      });
      tag.appendChild(removeBtn);
      substancesContainer.appendChild(tag);
    });
  }
  function checkIfMixReady() {
    mixButton.disabled = !(selectedBaseProduct && selectedSubstances.length);
  }
</script>
</body>
</html>
