<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Discord Bot Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <style>
    :root {
      --bg-color: #f8f9fa;
      --text-color: #212529;
      --card-bg: #ffffff;
      --sidebar-bg: #ffffff;
      --link-color: #212529;
    }
    [data-theme="dark"] {
      --bg-color: #121212;
      --text-color: #e0e0e0;
      --card-bg: #1e1e1e;
      --sidebar-bg: #1e1e1e;
      --link-color: #e0e0e0;
    }
    body { background-color: var(--bg-color); color: var(--text-color); transition: background-color 0.3s, color 0.3s; }
    .card { background-color: var(--card-bg); transition: background-color 0.3s; }
    .sidebar { background-color: var(--sidebar-bg); min-height: 100vh; padding: 20px; transition: background-color 0.3s; }
    .sidebar a { color: var(--link-color); text-decoration: none; display: block; padding: 10px 0; transition: color 0.3s; }
    .sidebar a:hover { color: #0d6efd; }
    .toggle-btn { cursor: pointer; }
    .content-section { display: none; animation: fadeIn 0.5s; }
    .active-section { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    #loginContainer { max-width: 400px; margin: 100px auto; }
  </style>
</head>
<body data-theme="light">
  <div id="loginContainer" class="container">
    <div class="card shadow">
      <div class="card-body">
        <h3 class="card-title text-center mb-4">Sign In</h3>
        <form id="loginForm">
          <div class="mb-3">
            <input type="email" id="email" class="form-control" placeholder="Email" required>
          </div>
          <div class="mb-3">
            <input type="password" id="password" class="form-control" placeholder="Password" required>
          </div>
          <button type="submit" class="btn btn-primary w-100">Sign In</button>
        </form>
      </div>
    </div>
  </div>
  
  <div id="dashboardContainer" class="container-fluid" style="display:none;">
    <div class="row">
      <nav class="col-md-2 sidebar border-end">
        <h3 class="mb-4">Dashboard</h3>
        <a href="#" class="nav-link" data-target="generalMetrics">General Metrics</a>
        <a href="#" class="nav-link" data-target="memberStats">Member & Channel Stats</a>
        <a href="#" class="nav-link" data-target="serverInfo">Server Info</a>
        <a href="#" class="nav-link" data-target="activityLog">Activity Log</a>
        <div class="mt-4">
          <span class="toggle-btn badge bg-secondary p-2" id="themeToggle">Toggle Theme</span>
        </div>
        <div class="mt-4">
          <button id="signOutBtn" class="btn btn-sm btn-outline-danger">Sign Out</button>
        </div>
      </nav>
      <main class="col-md-10 p-4">
        <section id="generalMetrics" class="content-section active-section mb-4">
          <div class="row">
            <div class="col-md-6">
              <div class="card text-white bg-primary animate__animated animate__fadeIn">
                <div class="card-body">
                  <h5 class="card-title">Total Messages</h5>
                  <p class="card-text" id="messageCount">Loading...</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card text-white bg-success animate__animated animate__fadeIn">
                <div class="card-body">
                  <h5 class="card-title">Member Joins</h5>
                  <p class="card-text" id="memberJoinCount">Loading...</p>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section id="memberStats" class="content-section mb-4">
          <div class="card animate__animated animate__fadeIn">
            <div class="card-body">
              <h5 class="card-title">Member & Channel Stats</h5>
              <p class="card-text">
                <strong>Online Members:</strong> <span id="onlineMembers">Loading...</span><br>
                <strong>Total Members:</strong> <span id="totalMembers">Loading...</span><br>
                <strong>Offline Members:</strong> <span id="offlineMembers">Loading...</span><br>
                <strong>Total Channel Messages:</strong> <span id="channelMessageCount">Loading...</span>
              </p>
            </div>
          </div>
        </section>
        <section id="serverInfo" class="content-section mb-4">
          <div class="card animate__animated animate__fadeIn">
            <div class="card-header">Server Info</div>
            <div class="card-body">
              <dl class="row server-info mb-0">
                <dt class="col-sm-4">Server Name</dt>
                <dd class="col-sm-8">à§Ž ð“‚ƒ /dazes</dd>
                <dt class="col-sm-4">Created at</dt>
                <dd class="col-sm-8">Saturday, February 22, 2025 3:50 PM (2 months ago)</dd>
                <dt class="col-sm-4">Owner</dt>
                <dd class="col-sm-8">iluvmads#0</dd>
                <dt class="col-sm-4">Description</dt>
                <dd class="col-sm-8"><a href="https://dazes.org/" target="_blank">https://dazes.org/</a></dd>
                <dt class="col-sm-4">Boost Info</dt>
                <dd class="col-sm-8">Level 3, 20 boosts</dd>
                <dt class="col-sm-4">Verification Level</dt>
                <dd class="col-sm-8">Low</dd>
                <dt class="col-sm-4">Server Features</dt>
                <dd class="col-sm-8">
                  Vanity Url, Animated Icon, Role Icons, Seven Day Thread Archive, Private Threads, Community,<br>
                  Soundboard, Invite Splash, News, Banner, Three Day Thread Archive, Animated Banner, Member Profiles
                </dd>
                <dt class="col-sm-4">Members</dt>
                <dd class="col-sm-8">985</dd>
                <dt class="col-sm-4">Channels</dt>
                <dd class="col-sm-8">Total: 29, Text: 18, Voice: 3, Categories: 7</dd>
                <dt class="col-sm-4">Ban Count</dt>
                <dd class="col-sm-8">29</dd>
                <dt class="col-sm-4">Roles</dt>
                <dd class="col-sm-8">95</dd>
                <dt class="col-sm-4">Emojis</dt>
                <dd class="col-sm-8">237</dd>
                <dt class="col-sm-4">Server ID</dt>
                <dd class="col-sm-8">1342961798168711198</dd>
                <dt class="col-sm-4">Requested by</dt>
                <dd class="col-sm-8">williamprod â€¢ Today at 9:43 PM</dd>
              </dl>
            </div>
          </div>
        </section>
        <section id="activityLog" class="content-section">
          <div class="card animate__animated animate__fadeIn">
            <div class="card-header">Activity Log</div>
            <div class="card-body log"></div>
          </div>
        </section>
      </main>
    </div>
  </div>
  
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDTATBOCPb_uGYt5Trmx1EZu7doCR0WWvw",
      authDomain: "spotify-795ab.firebaseapp.com",
      databaseURL: "https://spotify-795ab-default-rtdb.firebaseio.com",
      projectId: "spotify-795ab",
      storageBucket: "spotify-795ab.appspot.com",
      messagingSenderId: "907464366407",
      appId: "1:907464366407:web:1c736b0a36c792ffdb1462"
    };
    firebase.initializeApp(firebaseConfig);
    
    const loginForm = document.getElementById('loginForm');
    loginForm.addEventListener('submit', e => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(() => loginForm.reset())
        .catch(error => alert(error.message));
    });
    
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('dashboardContainer').style.display = 'block';
        initDashboard();
      } else {
        document.getElementById('loginContainer').style.display = 'block';
        document.getElementById('dashboardContainer').style.display = 'none';
      }
    });
    
    document.getElementById('signOutBtn').addEventListener('click', () => {
      firebase.auth().signOut();
    });
    
    document.getElementById('themeToggle').addEventListener('click', () => {
      const currentTheme = document.body.getAttribute('data-theme');
      document.body.setAttribute('data-theme', currentTheme === 'light' ? 'dark' : 'light');
    });
    
    const navLinks = document.querySelectorAll('.sidebar a.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const target = link.getAttribute('data-target');
        document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active-section'));
        document.getElementById(target).classList.add('active-section');
      });
    });
    
    function initDashboard() {
      const db = firebase.database();
      const metricsRef = db.ref('metrics');
      metricsRef.on('value', snapshot => {
        const data = snapshot.val() || {};
        document.getElementById('messageCount').innerText = data.message_count || 0;
        document.getElementById('memberJoinCount').innerText = data.member_join_count || 0;
        document.getElementById('onlineMembers').innerText = data.online_members || 0;
        document.getElementById('totalMembers').innerText = data.total_members || 0;
        document.getElementById('offlineMembers').innerText = data.offline_members || 0;
        let channelMessageCount = 0;
        const channelIds = ["1342976939488710727", "1342978737733500959", "1343041689949831169"];
        if(data.channel_messages){
          channelIds.forEach(id => {
            channelMessageCount += Number(data.channel_messages[id] || 0);
          });
        }
        document.getElementById('channelMessageCount').innerText = channelMessageCount;
        const logElement = document.querySelector('#activityLog .log');
        const logEntry = document.createElement('div');
        logEntry.className = 'log-entry';
        const now = new Date().toLocaleTimeString();
        logEntry.innerText = `[${now}] Msgs: ${data.message_count || 0}, Joins: ${data.member_join_count || 0}, Online: ${data.online_members || 0}, Total: ${data.total_members || 0}, Offline: ${data.offline_members || 0}, ChMsg: ${channelMessageCount}`;
        logElement.appendChild(logEntry);
        logElement.scrollTop = logElement.scrollHeight;
      });
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
